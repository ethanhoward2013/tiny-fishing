<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="pragma" content="no-cache">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta charset="utf-8">
    <title>Tiny Fishing</title>
    <meta name="description" content="Tiny Fishing is a fishing game where you have to upgrade your gear to get bigger fish.">
    <meta name="robots" content="noindex,nofollow" />
    <script type="text/javascript" src="/js/main.js"></script>
    <style>
        body {
            background: #000;
            color: #cccccc;
            margin: 0px;
            padding: 0px;
            border: 0px;
        }

        canvas {
            image-rendering: optimizeSpeed;
            -webkit-interpolation-mode: nearest-neighbor;
            -ms-touch-action: none;
            margin: 0px;
            padding: 0px;
            border: 0px;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;  /* Ensures canvas is above other elements */
        }

        #modMenu {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 999;  /* Keeps the mod menu above the game */
            font-family: Arial, sans-serif;
            display: block;
            cursor: move; /* Makes it clear the mod menu is draggable */
        }

        #modMenu button {
            background: #444;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            margin-bottom: 5px;
            border-radius: 5px;
        }

        #modMenu button:hover {
            background: #666;
        }

        .dragging {
            opacity: 0.7;
        }

    </style>
    <script>
        // Make the mod menu draggable
        function makeDraggable(element) {
            var offsetX, offsetY;

            element.onmousedown = function (e) {
                e.preventDefault();
                offsetX = e.clientX - element.getBoundingClientRect().left;
                offsetY = e.clientY - element.getBoundingClientRect().top;

                document.onmousemove = function (e) {
                    element.style.left = e.clientX - offsetX + 'px';
                    element.style.top = e.clientY - offsetY + 'px';
                };

                document.onmouseup = function () {
                    document.onmousemove = null;
                    document.onmouseup = null;
                };
            };
        }

        document.addEventListener("DOMContentLoaded", function () {
            // Create mod menu
            let modMenu = document.createElement("div");
            modMenu.id = "modMenu";
            modMenu.innerHTML = `
                <h3 style="margin: 0 0 10px; text-align: center;">Mod Menu</h3>
                <button id="infiniteMoney">Infinite Money</button>
                <button id="infiniteCoins">Infinite Coins</button>
                <button id="disableMods">Disable Mods</button>
                <h4>Add Your Code Here:</h4>
                <textarea id="customCode" style="width: 100%; height: 100px;"></textarea>
                <button id="applyCustomCode">Apply Custom Code</button>
            `;
            document.body.appendChild(modMenu);

            // Make mod menu draggable
            makeDraggable(modMenu);

            // Function to modify game variables
            function setGameValue(property, value) {
                if (typeof window[property] !== "undefined") {
                    window[property] = value;
                }
            }

            // Event listeners for mod buttons
            document.getElementById("infiniteMoney").addEventListener("click", function () {
                setGameValue("playerMoney", 9999999);
                alert("Infinite Money Enabled!");
            });

            document.getElementById("infiniteCoins").addEventListener("click", function () {
                setGameValue("playerCoins", 9999999);
                alert("Infinite Coins Enabled!");
            });

            document.getElementById("disableMods").addEventListener("click", function () {
                setGameValue("playerMoney", 100);
                setGameValue("playerCoins", 10);
                alert("Mods Disabled!");
            });

            document.getElementById("applyCustomCode").addEventListener("click", function () {
                var customCode = document.getElementById("customCode").value;
                try {
                    eval(customCode); // Run the custom code entered by the user
                    alert("Custom code applied!");
                } catch (e) {
                    alert("Error in custom code: " + e.message);
                }
            });

            // Run the game script
            let script = document.createElement("script");
            script.src = "html5game/TinyFishing.js";
            script.onload = function() {
                GameMaker_Init();
            };
            document.body.appendChild(script);
        });
    </script>
</head>
<body style="overflow: hidden;">
    <div class="gm4html5_div_class" id="gm4html5_div_id" style="padding-top: 20px; position: absolute; height: 488px;">
        <canvas id="canvas" width="640" height="360">
            <p>Your browser doesn't support HTML5 canvas.</p>
        </canvas>
    </div>
</body>
</html>
