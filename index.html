<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="pragma" content="no-cache">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta charset="utf-8">
    <title>Tiny Fishing</title>
    <meta name="description" content="Tiny Fishing is a fishing game where you have to upgrade your gear to get bigger fish.">
    <meta name="robots" content="noindex,nofollow" />
    <script type="text/javascript" src="/js/main.js"></script>
    <style>
        body {
            background: #000;
            color: #cccccc;
            margin: 0px;
            padding: 0px;
            border: 0px;
        }
        canvas {
            image-rendering: optimizeSpeed;
            -webkit-interpolation-mode: nearest-neighbor;
            -ms-touch-action: none;
            margin: 0px;
            padding: 0px;
            border: 0px;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        #modMenu {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 999;
            font-family: Arial, sans-serif;
            display: block;
            cursor: move;
        }
        #modMenu button {
            background: #444;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            margin-bottom: 5px;
            border-radius: 5px;
        }
        #modMenu button:hover {
            background: #666;
        }
    </style>
    <script>
        // Make the mod menu draggable
        function makeDraggable(element) {
            var offsetX, offsetY;

            element.onmousedown = function (e) {
                e.preventDefault();
                offsetX = e.clientX - element.getBoundingClientRect().left;
                offsetY = e.clientY - element.getBoundingClientRect().top;

                document.onmousemove = function (e) {
                    element.style.left = e.clientX - offsetX + 'px';
                    element.style.top = e.clientY - offsetY + 'px';
                };

                document.onmouseup = function () {
                    document.onmousemove = null;
                    document.onmouseup = null;
                };
            };
        }

        document.addEventListener("DOMContentLoaded", function () {
            // Create mod menu
            let modMenu = document.createElement("div");
            modMenu.id = "modMenu";
            modMenu.innerHTML = `
                <h3 style="margin: 0 0 10px; text-align: center;">Mod Menu</h3>
                <button id="infiniteMoney">Infinite Money</button>
                <button id="infiniteCoins">Infinite Coins</button>
                <button id="disableMods">Disable Mods</button>
            `;
            document.body.appendChild(modMenu);

            // Make mod menu draggable
            makeDraggable(modMenu);

            // Simulate collecting fish (force the game to increment money/coins rapidly)
            let simulateFishCollection = function() {
                if (window.hasOwnProperty('catchFish') && typeof window.catchFish === "function") {
                    for (let i = 0; i < 1000; i++) {
                        window.catchFish(); // Simulate catching fish
                    }
                } else {
                    console.log("Catch fish function not found.");
                }
            };

            // Force a collection of fish after the game has initialized
            setTimeout(function() {
                simulateFishCollection(); // Call the function to simulate collecting fish
            }, 2000); // Start after a short delay to ensure the game is loaded

            // Monitor money and coins updates
            setInterval(function() {
                if (window.hasOwnProperty('playerMoney') && window.hasOwnProperty('playerCoins')) {
                    console.log("Money: " + window.playerMoney);
                    console.log("Coins: " + window.playerCoins);

                    // Hook into the game's variables and enable the mod buttons
                    document.getElementById("infiniteMoney").addEventListener("click", function () {
                        window.playerMoney = 9999999;  // Override playerMoney
                        alert("Infinite Money Enabled!");
                    });

                    document.getElementById("infiniteCoins").addEventListener("click", function () {
                        window.playerCoins = 9999999;  // Override playerCoins
                        alert("Infinite Coins Enabled!");
                    });

                    document.getElementById("disableMods").addEventListener("click", function () {
                        window.playerMoney = 100;  // Reset money
                        window.playerCoins = 10;  // Reset coins
                        alert("Mods Disabled!");
                    });
                } else {
                    console.log("Unable to find money or coins variable.");
                }
            }, 1000); // Check every second if money/coins are found

            // Run the game script
            let script = document.createElement("script");
            script.src = "html5game/TinyFishing.js";
            script.onload = function() {
                GameMaker_Init();
            };
            document.body.appendChild(script);
        });
    </script>
</head>
<body style="overflow: hidden;">
    <div class="gm4html5_div_class" id="gm4html5_div_id" style="padding-top: 20px; position: absolute; height: 488px;">
        <canvas id="canvas" width="640" height="360">
            <p>Your browser doesn't support HTML5 canvas.</p>
        </canvas>
    </div>
</body>
</html>
